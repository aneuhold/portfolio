ci:
  collect:
    numberOfRuns: 3
    settings:
      preset: desktop
  assert:
    # Should use the preset. It asserts everything besides performance is perfect.
    # preset: lighthouse:recommended
    assertions:
      # Category score thresholds
      categories:performance:
        - error
        - minScore: 0.8
      categories:accessibility:
        - error
        - minScore: 0.8
      categories:best-practices:
        - error
        - minScore: 0.8
      # Note: Not asserting categories:seo because the score is lowered by is-crawlable
      # which is expected to fail on preview deployments. Individual SEO audits will
      # still fail if they don't pass (with default minScore: 1) except is-crawlable.

      # Performance metric budgets
      interactive:
        - error
        - maxNumericValue: 3000
      first-contentful-paint:
        - error
        - maxNumericValue: 1500

      # Resource size budgets
      resource-summary:script:size:
        - error
        - maxNumericValue: 128000 # 125KB in bytes
      resource-summary:total:size:
        - error
        - maxNumericValue: 307200 # 300KB in bytes

      is-crawlable: off # This is expected for preview deployments

